<!DOCTYPE html>
<html>

<head id="preload">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

  <style>
    body {
      margin: 0;
    }

    p,
    ul,
    ol {
      /* margin-bottom: 2em; */
      color: #1d1d1d;
    }

    small {
      font-size: 80%;
    }

    sub,
    sup {
      font-size: 75%;
      line-height: 0;
      position: relative;
      vertical-align: baseline;
    }

    sub {
      bottom: -0.25em;
    }

    sup {
      top: -0.5em;
    }

    pre,
    code,
    kbd {
      font-family: monospace, monospace;
      font-size: 1em;
    }


    /* app.css */
    .resize-0 {
      resize: none;
    }

    .resize {
      resize: both;
    }

    .pointer {
      cursor: pointer;
    }
  </style>

</head>

<body id="someDomNode">

  <div class="conatiner">

    <div class="row">

      <div class="col-3">

        <div class="card">
          <div class="card-header">
            Dev Tools
          </div>
          <ul class="list-group list-group-flush" id="devdocs">

            <!-- form -->

          </ul>
        </div>

      </div>

      <div class="col-6">

        <div class="card p-4">
          <div class="row">
            <form onsubmit="search()" id="search-form">

              <div class="row">

                <div class="col-6">
                  <img class="img-fluid" src="google.png" alt="Google" srcset="google.png">
                </div>
                <div class="col-6 d-flex justify-content-end ">
                  <input type="button" onclick="search()" class="btn btn-sm btn-primary w-50"
                    value=" Search (Ctrl + ')  ">
                </div>

                <div class="col-6 my-2">
                  <select class="form-select" id="programing-lang" aria-label="Default select example" required>
                    <option selected disabled>Language</option>
                    <option value="PHP">PHP</option>
                    <option value="JS">JS</option>
                    <option value="Golang">Golang</option>
                    <option value="CSS">CSS</option>
                    <option value="Python">Python</option>
                    <option value="Dart">Dart</option>
                  </select>
                </div>
                <div class="col-6 my-2">
                  <select class="form-select" id="lang-framework" aria-label="Default select example" required>
                    <option selected disabled>Framework</option>
                    <option value="Laravel">Laravel</option>
                    <option value="Flutter">Flutter</option>
                    <option value="Angular">Angular</option>
                    <option value="React">React</option>
                  </select>
                </div>

                <div class="col-12">
                  <textarea class="form-control resize-0" name="query" id="query" cols="30" rows="3" required
                    placeholder="Search Query..."></textarea>
                </div>
            </form>
          </div>
        </div>

        <div class="row mt-4">

          <div class="col-12 col-md-6">
            <h5>Your internet speed is...
              <div class="panel" id="results">

                Still waiting for the meassurements.

              </div>
            </h5>
          </div>
          <div class="col-12 col-md-6">

            <h1 class="float-end">Your Search History</h1>
          </div>
        </div>

        <hr>

        <!--  -->
        <ul class="list-group" id="history"></ul>

      </div>
    </div>

    <div class="col-3">

      <div class="card">
        <div class="card-header d-flex">
          <div class="col-6">Bookmarks</div>
          <div class="col-6 ">
            <button class="float-end btn btn-sm btn-primary" onclick="openModal()">Add +</button>
          </div>
        </div>
        <ul class="list-group list-group-flush" id="bookmark_items">

        </ul>
      </div>

    </div>

  </div>


  </div>


  <!-- Modal -->
  <div class="modal fade " id="IframeModel" tabindex="-1" aria-labelledby="IframeModelLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-title">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Go Back</button>

          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <iframe style="height: 100%; width: 100%;" id="url-viewer" src="" frameborder="0"></iframe>
        </div>
      </div>
    </div>
  </div>


  <!-- Modal Open  -->
  <div class="modal fade " id="BookmarkModel" tabindex="-1" aria-labelledby="BookmarkModelLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-title">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Go Back</button>

          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- form to add bookmark -->
          <form onsubmit="" id="bookMarkForm">
            <div class="row">
              <div class="col-6">
                <input type="text" class="form-control" id="bookmark_name" placeholder="Bookmark Name" required>
              </div>
              <div class="col-6">
                <input type="url" class="form-control" id="bookmark_url" placeholder="Bookmark Url" required>
              </div>
              <div class="col-12 mt-4">
                <input type="button" onclick="addBookmark()" class="btn btn-primary w-100" value="Add Bookmark">
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    // keyboard event listner
    function KeyBoardSortCutEventListner(key, callback) {
      document.addEventListener('keydown', function (event) {
        if (event.ctrlKey && event.key === key) {
          callback();
        }
      });
    }

    KeyBoardSortCutEventListner("'", function () {
      doGoogleSearch();
    });

    function getQueryFromUi() {
      query = document.getElementById('programing-lang').value;
      query += " " + document.getElementById('lang-framework').value;
      query += " " + document.getElementById('query').value;
      return query;
    }

    function doGoogleSearch() {

      var searchStr = getQueryFromUi();
      var url = "https://www.google.com/search?q=" + searchStr;

      daveToHistory(searchStr, url);
      window.open(url, '_blank');
      // openUrlInIframe(url);

    }

    function search() {
      var searchStr = getQueryFromUi();
      var url = "https://www.google.com/search?q=" + searchStr;
      window.open(url, '_blank');
      daveToHistory(searchStr, url);

      // reset search form
      document.getElementById('search-form').reset();
    }

    function KeyBoardSortCutEventListnerForAlt(key, callback) {
      document.addEventListener('keydown', function (event) {
        if (event.ctrlKey && event.altKey && event.key === key) {

          callback();
        }
      });
    }

    KeyBoardSortCutEventListnerForAlt("l", function () {
      document.getElementById('programing-lang').focus();
    });

    KeyBoardSortCutEventListnerForAlt("f", function () {
      document.getElementById('lang-framework').focus();
    });

    KeyBoardSortCutEventListnerForAlt("s", function () {
      document.getElementById('query').focus();
    });


    // creae a temprary imframe in a model and open spefified url in it
    function openUrlInIframe(url) {
      var iframe = document.getElementById('url-viewer');
      iframe.src = url;
      createFullScreenModel();
    }

    // open full screen model
    function openFullScreenModel() {
      createFullScreenModel()
    }

    //  create a full screnn model box with iframe
    function createFullScreenModel() {

      var myModal = new bootstrap.Modal(document.getElementById('IframeModel'), options = {})
      myModal.show()

    }

    function openModal() {
      var myModal = new bootstrap.Modal(document.getElementById('BookmarkModel'), options = {})
      myModal.show()
    }

    function addBookmark() {
      let title = document.getElementById('bookmark_name').value;
      let url = document.getElementById('bookmark_url').value;

      let bookmark = {
        title: title,
        url: url
      };

      let bookmarks = localStorage.getItem('bookmarks');

      if (!bookmarks) {
        bookmarks = [];
      } else {
        bookmarks = JSON.parse(bookmarks);
      }

      bookmarks.push(bookmark);

      document.getElementById('bookMarkForm').reset();

      localStorage.setItem('bookmarks', JSON.stringify(bookmarks));

      loadBookmarks();

      // close modal
      var myModal = bootstrap.Modal.getInstance(document.getElementById('BookmarkModel'))
      myModal.hide()
    }


    function loadBookmarks() {

      var bookmarks = localStorage.getItem('bookmarks');

      if (!bookmarks) {
        bookmarks = '[]';
      }

      bookmarks = JSON.parse(bookmarks);

      var bookmarksResults = document.getElementById('bookmark_items');
      bookmarksResults.innerHTML = '';
      for (var i = 0; i < bookmarks.length; i++) {
        var name = bookmarks[i].title;
        var url = bookmarks[i].url;

        bookmarksResults.innerHTML += '<li class="list-group-item"><a target="_blank" href="' + url + '" class="btn btn-primary w-100">' + name + '</a></li>';
      }

    }

    setTimeout(() => {
      loadBookmarks();
      loadDevDocs();
    }, 1000);


    var devdocsDb = [
      {
        url: 'https://webhook.site',
        title: 'Webhook'
      },
      {
        url: 'https://regexr.com/',
        title: 'Regular Expresssion'
      },
      {
        url: 'https://smalldev.tools/base64-encoder-online',
        title: 'Encode/Decode Or Beautify'
      },
      {
        url: 'https://overapi.com/',
        title: 'Cheat Sheet'
      },
      {
        url: 'https://readme.so/editor',
        title: 'Create Docs'
      },
      {
        url: 'https://devdocs.io/',
        title: 'Docs'
      },
      {
        url: 'https://explainshell.com/',
        title: 'Explain Linux Command'
      },
    ];


    function loadDevDocs() {
      var devdocs = '';

      devdocsDb.forEach((element, index) => {

        KeyBoardSortCutEventListnerForAlt(index, function () {
          window.open(element.url, '_blank');
        });

        devdocs += '<li class="list-group-item"><button onclick="openUrlInIframe(\'' + element.url + '\')" class="btn btn-primary w-100">' + element.title + '</button></li>';
      });

      // append to dev docs
      document.getElementById('devdocs').innerHTML = devdocs;
    }

    function preloadDocs() {
      var devdocs = '';

      devdocsDb.forEach(element => {
        devdocs += '<link rel="prefetch" href="' + element.url + '">';
      });

      // append to head tag
      document.getElementsByTagName('head')[0].innerHTML += devdocs;
    }

    setTimeout(async () => {

      let someDomNode = document.getElementById('someDomNode');

      someDomNode.onpaste = function (e) {
        var paste = e.clipboardData && e.clipboardData.getData ?
          e.clipboardData.getData('text/plain') :                // Standard
          window.clipboardData && window.clipboardData.getData ?
            window.clipboardData.getData('Text') :                 // MS
            false;
        if (paste) {
          console.log({ paste });
        }
      };

      loadHistory();


    }, 2000);


    function internet() {
      var file_size = 127,
        start = performance.now(),
        end = 0,
        time = 0,
        xmlhttp = new XMLHttpRequest(),
        result = 0;

      xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          end = performance.now();
          time = (end - start) / 1000;
          result = (file_size / time / 1000 * 8).toFixed(2);
          document.getElementById('results').innerHTML = result + ' MBit/s';
        }
      }
      xmlhttp.open('GET', 'https://codepen.io/infomiho/pen/CuGJI.html', true);
      xmlhttp.send();
    }

    internet();

    function daveToHistory(title, url) {
      var history = localStorage.getItem('history');

      if (!history) {
        history = [];
      } else {
        history = JSON.parse(history);
      }

      history.push({
        url: url,
        title: title
      });

      localStorage.setItem('history', JSON.stringify(history));

      loadHistory();
    }


    // load history from localstorage in a good looking ui/ux
    function loadHistory() {
      var history = localStorage.getItem('history');

      if (!history) {
        history = '[]';
      }

      history = JSON.parse(history);

      var historyResults = document.getElementById('history');
      historyResults.innerHTML = '';
      for (var i = 0; i < history.length; i++) {
        var name = history[i].title;
        var url = history[i].url;

        historyResults.innerHTML += '<li class="pointer list-group-item"><h3>' + name + '</h3><a href="' + url + '">' + url + '</a></li>';
      }
    }

  </script>

</body>

</html>
